(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9922],{70959:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/groups/[group]/event/[event]",function(){return n(56155)}])},42373:function(e,t,n){"use strict";var r=n(85893),o=(n(11075),n(61214)),i=n(86886),c=(n(72211),n(15503),n(11163),n(17320)),a=(n(20698),n(52168));n(89826);var s=(0,o.Z)((function(e){return{root:{display:"flex",backgroundColor:"#F9FAFA",minHeight:"100vh"},feed:{width:"100%"},rightBar:(t={backgroundColor:"white"},n=e.breakpoints.down("lg"),r={display:"none"},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),leftBar:{backgroundColor:"white"}};var t,n,r}));t.Z=function(e){var t=e.children,n=s();return(0,r.jsx)("div",{className:n.root,children:(0,r.jsxs)(i.ZP,{container:!0,children:[(0,r.jsx)(i.ZP,{item:!0,sm:2,className:n.leftBar,children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)(i.ZP,{item:!0,sm:8,className:n.feed,children:t}),(0,r.jsx)(i.ZP,{item:!0,sm:2,className:n.rightBar,children:(0,r.jsx)(c.Z,{})})]})})}},63399:function(e,t,n){"use strict";var r=n(85893),o=n(67294),i=n(45697),c=n.n(i),a=n(86010),s=n(11163),l=n(41664),u=n(50122);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=(0,n(11496).ZP)("a")({}),v=o.forwardRef((function(e,t){var n=e.to,o=e.linkAs,i=(e.href,e.replace),c=e.scroll,a=e.shallow,s=e.prefetch,u=e.locale,f=p(e,["to","linkAs","href","replace","scroll","shallow","prefetch","locale"]);return(0,r.jsx)(l.default,{href:n,prefetch:s,as:o,replace:i,scroll:c,shallow:a,passHref:!0,locale:u,children:(0,r.jsx)(h,d({ref:t},f))})}));v.propTypes={href:c().any,linkAs:c().oneOfType([c().object,c().string]),locale:c().string,passHref:c().bool,prefetch:c().bool,replace:c().bool,scroll:c().bool,shallow:c().bool,to:c().oneOfType([c().object,c().string]).isRequired};var m=o.forwardRef((function(e,t){var n=e.activeClassName,o=void 0===n?"active":n,i=e.as,c=e.className,l=e.href,m=e.noLinkStyle,g=(e.role,p(e,["activeClassName","as","className","href","noLinkStyle","role"])),y=(0,s.useRouter)(),x="string"===typeof l?l:l.pathname,b=(0,a.Z)(c,f({},o,y.pathname===x&&o));return"string"===typeof l&&(0===l.indexOf("http")||0===l.indexOf("mailto:"))?m?(0,r.jsx)(h,d({className:b,href:l,ref:t},g)):(0,r.jsx)(u.Z,d({className:b,href:l,ref:t},g)):m?(0,r.jsx)(v,d({className:b,ref:t,to:l},g)):(0,r.jsx)(u.Z,d({component:v,linkAs:i,className:b,ref:t,to:l},g))}));m.propTypes={activeClassName:c().string,as:c().oneOfType([c().object,c().string]),className:c().string,href:c().any,linkAs:c().oneOfType([c().object,c().string]),noLinkStyle:c().bool,role:c().string},t.C=m},56155:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Me}});var r=n(34051),o=n.n(r),i=n(85893),c=n(42373),a=n(67294),s=n(15503),l=(n(70853),n(72211),n(11163)),u=n(27948),f=n(61214),d=n(66242),p=n(62023),h=n(44267),v=n(83321),m=n(15861),g=n(78445),y=n(63399),x=n(45697),b=n.n(x),j=n(11496),Z=n(64666),w=n(37645),S=n(6514),O=n(31425),k=n(93946),C=n(50594),D=n(87357),P=n(26447);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){A(i,r,o,c,a,"next",e)}function a(e){A(i,r,o,c,a,"throw",e)}c(void 0)}))}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(s){a=!0,o=s}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=(0,j.ZP)(Z.Z)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),R=function(e){var t=e.children,n=e.onClose,r=T(e,["children","onClose"]);return(0,i.jsxs)(w.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({sx:{m:0,p:2}},r,{children:[t,n?(0,i.jsx)(k.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,i.jsx)(C.Z,{})}):null]}))};function M(e){var t=e.eventID,n=e.groupID,r=L(a.useState(!1),2),c=r[0],l=r[1],u=(0,a.useState)(""),f=u[0],d=u[1],p=(0,a.useState)(""),h=p[0],g=p[1],y=(0,a.useState)(""),x=y[0],b=y[1],j=(0,a.useState)(""),Z=j[0],w=j[1],k=(0,a.useState)(""),C=k[0],I=k[1],A=(0,a.useState)(""),E=A[0],T=A[1],M=function(){l(!1)};return(0,a.useEffect)((function(){var e=!0;function r(){return(r=N(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Z.firestore().collection("groupTopMatch").doc(t).onSnapshot((function(t){t.exists?e&&(d(t.data().solution.name),g(t.data().solution.location),b(t.data().solution.rating),w(t.data().solution.reviewCount),I(t.data().solution.imgUrl)):console.log("Document does not exists")}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=N(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.firestore().collection("groupsCategory").doc(n).collection("events").doc(t).onSnapshot((function(t){t.exists?e&&T(t.data().eventCategory):console.log("Document does not exists")}));case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r.apply(this,arguments)}(),function(){e=!1}}),[]),console.log(E),(0,i.jsxs)("div",{children:[(0,i.jsx)(v.Z,{size:"small",onClick:function(){l(!0)},children:"See matched event"}),(0,i.jsxs)(U,{onClose:M,"aria-labelledby":"customized-dialog-title",open:c,children:[(0,i.jsx)(R,{id:"customized-dialog-title",onClose:M,children:E.toUpperCase()}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(D.Z,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(D.Z,{component:"img",sx:{height:400,width:250},alt:"",src:C})}),(0,i.jsx)(m.Z,{variant:"h5",align:"center",sx:{paddingTop:2},gutterBottom:!0,children:f}),(0,i.jsxs)(P.Z,{spacing:1,direction:"row",children:[(0,i.jsx)(m.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Location:"}),(0,i.jsx)(m.Z,{variant:"subtitle1",children:h})]}),(0,i.jsxs)(P.Z,{spacing:1,direction:"row",children:[(0,i.jsx)(m.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Review Count:"}),(0,i.jsx)(m.Z,{variant:"subtitle1",children:Z})]}),(0,i.jsxs)(P.Z,{spacing:1,direction:"row",children:[(0,i.jsx)(m.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Rating:"}),(0,i.jsx)(m.Z,{variant:"subtitle1",children:x})]})]}),(0,i.jsx)(O.Z,{children:(0,i.jsx)(v.Z,{autoFocus:!0,onClick:M,children:"Close"})})]})]})}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){W(i,r,o,c,a,"next",e)}function a(e){W(i,r,o,c,a,"throw",e)}c(void 0)}))}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(s){a=!0,o=s}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}R.propTypes={children:b().node,onClose:b().func.isRequired};var V=(0,j.ZP)(Z.Z)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),$=function(e){var t=e.children,n=e.onClose,r=B(e,["children","onClose"]);return(0,i.jsxs)(w.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}({sx:{m:0,p:2}},r,{children:[t,n?(0,i.jsx)(k.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,i.jsx)(C.Z,{})}):null]}))};function H(e){var t=e.eventID,n=e.groupID,r=q(a.useState(!1),2),c=r[0],l=r[1],u=(0,a.useState)(""),f=u[0],d=u[1],p=(0,a.useState)(""),h=p[0],g=p[1],y=(0,a.useState)(""),x=y[0],b=y[1],j=(0,a.useState)(""),Z=j[0],w=j[1],k=(0,a.useState)(""),C=k[0],I=k[1],A=function(){l(!1)};return(0,a.useEffect)((function(){var e=!0;function r(){return(r=_(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Z.firestore().collection("groupTopMatch").doc(t).onSnapshot((function(t){e&&(d(t.data().solution.name),b(t.data().solution.imgUrl),g(t.data().solution.releaseDate),w(t.data().solution.overView))}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=_(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.firestore().collection("groupsCategory").doc(n).collection("events").doc(t).onSnapshot((function(t){e&&I(t.data().eventCategory)}));case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r.apply(this,arguments)}(),function(){e=!1}}),[]),console.log(C),(0,i.jsxs)("div",{children:[(0,i.jsx)(v.Z,{size:"small",onClick:function(){l(!0)},children:"See matched event"}),(0,i.jsxs)(V,{onClose:A,"aria-labelledby":"customized-dialog-title",open:c,children:[(0,i.jsx)($,{id:"customized-dialog-title",onClose:A,children:C.toUpperCase()}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(D.Z,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(D.Z,{component:"img",sx:{height:400,width:250},alt:"",src:x})}),(0,i.jsx)(m.Z,{variant:"h5",align:"center",sx:{paddingTop:2},gutterBottom:!0,children:f}),(0,i.jsxs)(P.Z,{spacing:1,direction:"row",children:[(0,i.jsx)(m.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Overview:"}),(0,i.jsx)(m.Z,{variant:"subtitle1",children:Z})]}),(0,i.jsxs)(P.Z,{spacing:1,direction:"row",children:[(0,i.jsx)(m.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Released Date:"}),(0,i.jsx)(m.Z,{variant:"subtitle1",children:h})]})]}),(0,i.jsx)(O.Z,{children:(0,i.jsx)(v.Z,{autoFocus:!0,onClick:A,children:"Close"})})]})]})}function X(e){var t,n,r=e.event,o=e.groupID,c=e.membersPicked,a=e.currentUserUID,s=e.groupMembersList,l=r.eventName,u=r.eventTime,f=r.eventDate,x=(r.eventLocation,r.eventAdmin,r.eventCategory),b=r.eventID,j=(r.imageURL,r.groupName),Z=(r.altText,r.adminPicks),w=r.movieType,S=r.longitude,O=r.latitude,k="/categories/activity/options/".concat(o,"&").concat(b,"&").concat(Z,"&lat=").concat(O,"&long=").concat(S),C="/categories/food/options/".concat(o,"&").concat(b,"&").concat(Z,"&lat=").concat(O,"&long=").concat(S),D="/categories/movie/options/".concat(o,"&").concat(b,"&").concat(w,"&").concat(Z),P=(n=s,(t=c).length===n.length&&t.every((function(e){return!!n.includes(e)}))),I="movie"==x;console.log("show movie dailogg  ",I);var A="activity"==x?k:"food"==x?C:D;return(0,i.jsxs)(d.Z,{sx:{minWidth:600},elevation:3,children:[(0,i.jsx)(g.Z,{title:l,subheader:j}),(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(m.Z,{variant:"body1",color:"text.secondary",children:"Category: "+x}),(0,i.jsx)(m.Z,{variant:"body1",color:"text.secondary",children:"When: "+f}),(0,i.jsx)(m.Z,{variant:"body1",color:"text.secondary",children:"Time: "+u})]}),(0,i.jsxs)(p.Z,{children:[c.includes(a)?null:(0,i.jsx)(y.C,{href:A,underline:"none",children:(0,i.jsx)(v.Z,{size:"small",children:"DO SURVEY NOW"})}),1==P?1==I?(0,i.jsx)(H,{eventName:l,eventID:b,groupID:o}):(0,i.jsx)(M,{eventName:l,eventID:b,groupID:o}):null]})]})}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){Y(i,r,o,c,a,"next",e)}function a(e){Y(i,r,o,c,a,"throw",e)}c(void 0)}))}}function K(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}$.propTypes={children:b().node,onClose:b().func.isRequired};var Q=(0,f.Z)((function(e){return{page:{padding:"50px",display:"flex",alignItems:"center",justifyContent:"center"}}})),ee=function(e){var t=e.groupID,n=e.eventID,r=(e.eventDetails,e.eventName,Q()),c=(0,a.useState)([]),l=c[0],f=c[1],d=(0,a.useState)([]),p=d[0],h=d[1],v=(0,a.useState)([]),m=v[0],g=v[1],y=s.Z.auth().currentUser.uid;return(0,a.useEffect)((function(){var e=!0;function r(){return(r=J(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.firestore().collection("groupsCategory").doc(t).collection("events").doc(n).onSnapshot((function(t){e&&f(t.data())}));case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function i(){return(i=J(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.firestore().collection("groupsCategory").doc(t).collection("events").doc(n).collection("memberPicks").onSnapshot((function(t){t.forEach((function(t){e&&(p.includes(t.id)||h((function(e){return K(e).concat([t.id])})))}))}));case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function c(){return(c=J(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Z.firestore().collection("groups").doc(t).onSnapshot((function(t){if(e){var n=!0,r=!1,o=void 0;try{for(var i,c=function(e,t){var n=t.value;g((function(e){return K(e).concat([n])}))},a=t.data().groupMembers[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)c(0,i)}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){i.apply(this,arguments)}(),function(){c.apply(this,arguments)}(),function(){e=!1}}),[]),(0,i.jsx)(u.Z,{className:r.page,children:(0,i.jsx)(X,{event:l,membersPicked:p,groupID:t,currentUserUID:y,groupMembersList:m})})},te=n(86886),ne=n(58951),re=n(98396),oe=n(2734),ie=n(63205),ce=n(67473);var ae=n(8442),se=n(50720),le=n(46747),ue=n(89117);function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){de(e,t,n[t])}))}return e}function he(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);c=!0);}catch(s){a=!0,o=s}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(0,f.Z)((function(e){return{textField:{margin:"10px auto"}}}));var me=function(e){var t=e.children,n=e.onClose,r=he(e,["children","onClose"]);return(0,i.jsxs)(w.Z,pe({sx:{m:0,p:2}},r,{children:[t,n?(0,i.jsx)(k.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,i.jsx)(C.Z,{})}):null]}))};me.propTypes={children:b().node,onClose:b().func.isRequired};var ge=function(e){var t=e.groupID,n=e.eventID,r=e.eventDetails,o=r.eventName,c=r.eventTime,l=r.eventDate,u=ve(a.useState(!1),2),f=u[0],d=u[1],p=(0,oe.Z)(),h=(0,re.Z)(p.breakpoints.down("md")),m=ve(a.useState("md"),2),g=(m[0],m[1],(0,a.useState)(l)),y=g[0],x=g[1],b=(0,a.useState)(c),j=b[0],w=b[1],k=(0,a.useState)(o),C=k[0],D=k[1];console.log({selectedDate:y&&y.toLocaleDateString()}),console.log({selectedTime:j&&j.toLocaleTimeString()}),console.log("ev deeetss  "+l);var I=function(){d(!1)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(v.Z,{variant:"outlined",onClick:function(){d(!0)},startIcon:(0,i.jsx)(ie.Z,{}),children:"EDIT EVENT"}),(0,i.jsxs)(Z.Z,{fullScreen:h,fullWidth:!0,maxWidth:"xs",open:f,onClose:I,"aria-labelledby":"responsive-dialog-title",children:[(0,i.jsx)(me,{id:"customized-dialog-title",onClose:I,children:"Edit Event Details"}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(ne.Z,{children:"Update the event details below."}),(0,i.jsx)(se._,{dateAdapter:ae.Z,children:(0,i.jsxs)(P.Z,{spacing:3,children:[(0,i.jsx)(ce.Z,{autoFocus:!0,margin:"dense",defaultValue:o,id:"group-name",label:"Event Name",type:"email",fullWidth:!0,variant:"standard",onChange:function(e){return D(e.target.value)}}),(0,i.jsx)(le.M,{label:"Event Date",value:y,onChange:function(e){x(e)},renderInput:function(e){return(0,i.jsx)(ce.Z,pe({},e))}}),(0,i.jsx)(ue.j,{label:"Event Time",value:j,onChange:function(e){w(e)},renderInput:function(e){return(0,i.jsx)(ce.Z,pe({},e))}})]})})]}),(0,i.jsx)(O.Z,{children:(0,i.jsx)(v.Z,{autoFocus:!0,onClick:function(){s.Z.firestore().collection("groupsCategory").doc(t).collection("events").doc(n).update({eventName:C,eventDate:y&&y.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),eventTime:j&&j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),calendarDate:y}).catch((function(e){alert(e),console.log(e)})),I()},children:"Submit"})})]})]})},ye=n(86467),xe=n(78298);function be(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){be(i,r,o,c,a,"next",e)}function a(e){be(i,r,o,c,a,"throw",e)}c(void 0)}))}}var Ze=(0,f.Z)((function(e){return{page:{padding:"50px"},groupTitle:{marginRight:e.spacing(2),color:e.colours.gradient1},groupLine:{flexGrow:1},backArrow:{marginRight:e.spacing(8)}}})),we=function(e){var t=e.eventID,n=e.eventName,r=e.groupID,c=e.eventDetails,f=Ze(),d=(0,l.useRouter)(),p=s.Z.auth().currentUser.uid,h=(0,a.useState)(""),v=h[0],g=h[1];return(0,a.useEffect)((function(){function e(){return(e=je(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.firestore().collection("groups").where("groupID","==",r).get().then((function(e){e.forEach((function(e){console.log("printing admin deeeets here  "+e.data().groupAdmin),g(e.data().groupAdmin)}))})).catch((function(e){console.log("Error getting documents: ",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),(0,i.jsx)("div",{children:(0,i.jsx)(u.Z,{className:f.page,children:(0,i.jsxs)(te.ZP,{container:!0,direction:"row",alignItems:"center",children:[(0,i.jsx)("div",{className:f.backArrow,children:(0,i.jsx)(k.Z,{size:"medium",onClick:function(){d.push("/groups/".concat(r))},children:(0,i.jsx)(xe.Z,{fontSize:"inherit"})})}),(0,i.jsx)(ye.Z,{fontSize:"large",className:f.groupTitle}),(0,i.jsx)(m.Z,{variant:"h5",className:f.groupLine,children:n}),p==v?(0,i.jsx)(ge,{groupID:r,eventID:t,eventDetails:c}):null]})})})},Se=n(56760),Oe=n(87109),ke=n(78462),Ce=n(97212),De=n(18987),Pe=n(69661),Ie=n(79953),Ae=n(21519);function Ne(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){Ne(i,r,o,c,a,"next",e)}function a(e){Ne(i,r,o,c,a,"throw",e)}c(void 0)}))}}var Te=(0,f.Z)((function(e){return{root:{width:"100%",backgroundColor:"#F9FAFA"},fonts:{fontWeight:"bold"},inline:{display:"inline"},commentForm:{width:"100%"},avatar:{fontSize:32,backgroundColor:e.colours.pink},page:{padding:"50px"}}})),Le=function(){var e=Te(),t=(0,l.useRouter)(),n=(0,Se.Z)(),r=(t.query.group,t.query.event),c=s.Z.auth().currentUser.uid,f=(0,a.useState)(""),d=f[0],p=f[1],h=(0,a.useState)([]),g=h[0],y=h[1],x=(0,a.useState)(""),b=x[0],j=x[1];(0,a.useEffect)((function(){function e(){return(e=Ee(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.firestore().collection("users").doc(c).get().then((function(e){p(e.data().userName),console.log("hereeee "+e.data().userBio)})).catch((function(e){console.log("Error getting documents: ",e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()})),(0,a.useEffect)((function(){s.Z.firestore().collection("posts").doc(r).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){y(e.docs.map((function(e){return e.data()})))}))}),[]);d.charAt(0).toLocaleUpperCase();return(0,i.jsxs)(u.Z,{className:e.page,children:[(0,i.jsx)(m.Z,{variant:"h5",gutterBottom:!0,children:"Comments"}),(0,i.jsx)(D.Z,{sx:{maxWidth:"100%",marginBottom:n.spacing(2)},children:(0,i.jsx)(ce.Z,{fullWidth:!0,id:"fullWidth",value:b,placeholder:"Add a comment..",onChange:function(e){return j(e.target.value)},InputProps:{endAdornment:(0,i.jsx)(Oe.Z,{position:"end",children:(0,i.jsx)(v.Z,{variant:"text",disableRipple:"true",disableFocusRipple:"true",onClick:function(){var e=s.Z.firestore().collection("posts").doc(r).collection("comments").doc();e.set({text:b,userName:d,userID:c,timestamp:new Date,commentID:e}).catch((function(e){alert(e),console.log(e)})),j("")},children:"POST"})})}})}),(0,i.jsx)(ke.Z,{className:e.root,children:g.map((function(t){return console.log("Comment",t),(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)(Ce.ZP,{alignItems:"flex-start",children:[(0,i.jsx)(De.Z,{children:(0,i.jsx)(Pe.Z,{className:e.avatar,children:t.userName.charAt(0).toLocaleUpperCase()})}),(0,i.jsx)(Ie.Z,{primary:(0,i.jsx)(m.Z,{className:e.fonts,children:t.userName}),secondary:(0,i.jsx)(m.Z,{component:"span",variant:"body2",className:e.inline,color:"textPrimary",children:t.text})})]},t.commentID),(0,i.jsx)(Ae.Z,{})]},t.commentID)}))})]})};function Ue(e,t,n,r,o,i,c){try{var a=e[i](c),s=a.value}catch(l){return void n(l)}a.done?t(s):Promise.resolve(s).then(r,o)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){Ue(i,r,o,c,a,"next",e)}function a(e){Ue(i,r,o,c,a,"throw",e)}c(void 0)}))}}var Me=function(){var e=(0,l.useRouter)(),t=(e.asPath.split("/")[2],e.query.group),n=e.query.event,r=(0,a.useState)(""),u=r[0],f=r[1],d=(0,a.useState)([]),p=d[0],h=d[1],v=(0,a.useState)([]),m=(v[0],v[1],(0,a.useState)([])),g=m[0],y=m[1],x=(0,a.useState)(),b=(x[0],x[1]),j=(0,a.useState)(),Z=(j[0],j[1]),w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={};return!(t>Object.keys(e).length)&&(Object.keys(e).sort((function(t,n){return e[n]-e[t]})).forEach((function(r,o){o<t&&(n[r]=e[r])})),n)};(0,a.useEffect)((function(){var e=!0;function r(){return(r=Re(o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.firestore().collection("groupsCategory").doc(t).collection("events").doc(n).onSnapshot((function(t){e&&(f(t.data().eventName),h(t.data()))}));case 2:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),k(),function(){e=!1}}),[]);var S=function(){var e=Re(o().mark((function e(){var r,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.firestore().collection("groupsCategory").doc(t).collection("events").doc(n).collection("memberPicks").get();case 2:r=e.sent,i=r.docs.map((function(e){return e.data().userLikes})),c=i.flat(),s.Z.firestore().collection("eventLikes").doc(n).set({ActivityLikes:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){var e=!1;return e||(S(),O()),function(){e=!0}}),[]);var O=function(){var e=Re(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=s.Z.firestore().collection("eventLikes").doc(n).collection("topPicks").doc(n).get()).exists?(r=t.data(),b(r.maxVal)):console.log("no profile saved in the database. Edit profile now");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Re(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.Z.firestore().collection("eventLikes").doc(n).onSnapshot((function(e){if(e.exists){var r=function(e){s.Z.firestore().collection("eventLikes").doc(n).onSnapshot((function(t){u.push(t.data().ActivityLikes.find((function(t){return t.name===l[e]}))),s.Z.firestore().collection("groupTopFiveMatch").doc(n).set({solution:u})}))},o=e.data().ActivityLikes.reduce((function(e,t){return e[t.name]=(e[t.name]||0)+1,e}),{});y(o);var i=0,c="";for(var a in o)o[a]>i&&(i=o[a],c=a);s.Z.firestore().collection("eventLikes").doc(n).onSnapshot((function(e){var r=e.data().ActivityLikes.find((function(e){return e.name===c}));Z(r),s.Z.firestore().collection("groupTopMatch").doc(n).set({solution:r,groupID:t,eventID:n})})),s.Z.firestore().collection("eventLikes").doc(n).collection("topPicks").doc(n).set({nameCount:o,maxVal:c});for(var l=Object.keys(w(g,5)),u=[],f=0;f<l.length;f++)r(f)}else console.log("Document does not exists")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsx)("div",{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(we,{eventName:u,groupID:t,eventID:n,eventDetails:p}),(0,i.jsx)(ee,{eventName:u,eventID:n,groupID:t,eventDetails:p}),(0,i.jsx)(Le,{})]})})}}},function(e){e.O(0,[1214,400,8112,1688,482,7473,8804,561,990,4755,4995,1493,9774,2888,179],(function(){return t=70959,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
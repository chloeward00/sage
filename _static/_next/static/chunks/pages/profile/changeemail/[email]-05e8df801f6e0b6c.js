(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8378],{19649:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/changeemail/[email]",function(){return n(53125)}])},53125:function(e,r,n){"use strict";n.r(r);var a=n(34051),t=n.n(a),i=n(85893),l=n(61214),o=n(55113),s=n(86886),u=n(15861),c=n(67473),d=n(83321),m=n(45608),p=(n(67294),n(87536)),h=n(11163),f=n(12461),v=n(15503);n(70853),n(72211);function g(e,r,n,a,t,i,l){try{var o=e[i](l),s=o.value}catch(u){return void n(u)}o.done?r(s):Promise.resolve(s).then(a,t)}function w(e){return function(){var r=this,n=arguments;return new Promise((function(a,t){var i=e.apply(r,n);function l(e){g(i,a,t,l,o,"next",e)}function o(e){g(i,a,t,l,o,"throw",e)}l(void 0)}))}}function b(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(r){b(e,r,n[r])}))}return e}var x=(0,l.Z)((function(e){var r;return{textField:(r={},b(r,"& fieldset",{borderRadius:10}),b(r,"margin","10px auto"),r),logo:{marginTop:20,marginLeft:30},formStyle:b({padding:"30px 30px",width:500},e.breakpoints.down("sm"),{width:300}),buttonStyle:{backgroundColor:"#5082B3","&:hover":{backgroundColor:"#6392C0"},borderRadius:20,width:"50%"},button:{justifyContent:"center",margin:"10px auto"},login:{fontWeight:600,color:"#5082B3"},signUpStyle:{margin:"auto 5px"},divider:{margin:"20px auto"},root:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#A9B5DD",minHeight:"100vh"}}}));r.default=function(){var e=x(),r=(0,h.useRouter)(),n=r.query.email;console.log("user email hereee   "+n);var a=function(e){v.Z.firestore().collection("users").doc(n).update({userEmail:e}).catch((function(e){alert(e),console.log(e)})),r.push("/home")};function l(){return(l=w(t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.ZP.loading({key:"Change email address",content:"Attempting to change email address"}),r.currentemail!==r.newemail){e.next=5;break}alert("Duplicate emails new email cannot be the same as old email."),e.next=16;break;case 5:if(r.currentemail===r.newemail){e.next=16;break}return e.prev=6,e.next=9,m.Z.updateUsersEmail(r.password,r.newemail);case 9:f.ZP.success({key:"Change email address",content:"You have successfully changed your accounts email address"}),a(r.newemail),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),f.ZP.error({key:"Change email address",content:e.t0.message||"An error occurred when trying to change your accounts email address. Please try again."});case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}var g=(0,p.cI)(),b=g.register,P=g.handleSubmit,j=g.formState.errors;return(0,i.jsx)("div",{className:e.root,children:(0,i.jsxs)(o.Z,{elevation:10,className:e.formStyle,children:[(0,i.jsx)(s.ZP,{children:(0,i.jsx)(u.Z,{variant:"h4",gutterBottom:!0,className:e.login,children:"Change Email Address"})}),(0,i.jsxs)("form",{onSubmit:P((function(e){return l.apply(this,arguments)})),children:[(0,i.jsx)(c.Z,y({id:"currentemail",label:"Current Email",variant:"outlined",fullWidth:!0,className:e.textField},b("currentemail",{required:"Please enter your current email address",pattern:{value:/^[A-Za-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,message:"Invalid email address"}}),{error:!!(null===j||void 0===j?void 0:j.currentemail),helperText:(null===j||void 0===j?void 0:j.currentemail)?j.currentemail.message:null})),(0,i.jsx)(c.Z,y({id:"newemail",label:"New Email",variant:"outlined",fullWidth:!0,className:e.textField},b("newemail",{required:"Please enter your new email address",pattern:{value:/^[A-Za-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,message:"Invalid email address"}}),{error:!!(null===j||void 0===j?void 0:j.newemail),helperText:(null===j||void 0===j?void 0:j.newemail)?j.newemail.message:null})),(0,i.jsx)(c.Z,y({id:"password",label:"Password",variant:"outlined",type:"password",fullWidth:!0,className:e.textField},b("password",{required:"Please enter a password",minLength:{value:6,message:"Incorrect password."}}),{error:!!(null===j||void 0===j?void 0:j.password),helperText:(null===j||void 0===j?void 0:j.password)?j.password.message:null})),(0,i.jsx)(s.ZP,{container:!0,item:!0,className:e.button,children:(0,i.jsx)(d.Z,{type:"submit",variant:"contained",className:e.buttonStyle,size:"large",children:"Change Email"})})]})]})})}}},function(e){e.O(0,[1214,400,8112,1688,482,7473,7536,2805,9774,2888,179],(function(){return r=19649,e(e.s=r);var r}));var r=e.O();_N_E=r}]);